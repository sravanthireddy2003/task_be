-- taskassignments
CREATE TABLE taskassignmentsss (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_Id INT NOT NULL,
    task_Id INT NOT NULL,
    FOREIGN KEY (user_Id) REFERENCES users(_id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (task_Id) REFERENCES tasks(id) ON DELETE CASCADE ON UPDATE CASCADE
);

ALTER TABLE Student RENAME TO Student_Details;

-- tasks
CREATE TABLE tasks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    stage VARCHAR(50),
    taskDate DATE,
    priority VARCHAR(255) NOT NULL,
    createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- subtasks
CREATE TABLE subtasks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    task_Id INT NOT NULL,
    tag VARCHAR(255),
    title VARCHAR(255) NOT NULL,
    due_date TIMESTAMP NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (task_Id) REFERENCES tasks(id) ON DELETE CASCADE ON UPDATE CASCADE
);

-- subtaskassign
CREATE TABLE subtaskassign (
    id INT AUTO_INCREMENT PRIMARY KEY,
    subtask_Id INT NOT NULL,
    task_Id INT NOT NULL,
    FOREIGN KEY (subtask_Id) REFERENCES subtaskss(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (task_Id) REFERENCES tasks(id) ON DELETE CASCADE ON UPDATE CASCADE
);



